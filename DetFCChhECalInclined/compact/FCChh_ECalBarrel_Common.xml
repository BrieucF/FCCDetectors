<?xml version="1.0" encoding="UTF-8"?>
<lccdd xmlns:compact="http://www.lcsim.org/schemas/compact/1.0"
       xmlns:xs="http://www.w3.org/2001/XMLSchema"
       xs:noNamespaceSchemaLocation="http://www.lcsim.org/schemas/compact/1.0/compact.xsd">

  <info name="FCChh_ECalBarrel_Common"
        title="Common settings for Inclined ECal Barrel Calorimeter"
        author="M.Aleksa,J.Faltova,A.Zaborowska"
        url="no"
        status="development"
        version="1.0">
    <comment>
      Common settings for the inclined EMcal.
      The barrel is filled with liquid argon. Lead plates are inclined by a certain angle from the radial direction.
      In between of two lead plates there is a readout.
      Space between the plane and readout is of trapezoidal shape and filled with liquid argon.
      Definition of sizes, visualization settings and readout are specified.
    </comment>
  </info>

  <define>
    <constant name="LArBathThickness" value="100*mm"/>
    <!-- overall calorimeter volume (cryostat) -->
    <constant name="BarCryoECal_rmin" value="BarECal_rmin"/>
    <constant name="BarCryoECal_rmax" value="BarECal_rmax"/>
    <constant name="BarCryoECal_dz" value="BarECal_dz"/>
    <!-- calorimeter active volume -->
    <constant name="EMBarrel_rmin" value="BarCryoECal_rmin+CommonCryoThickness+LArBathThickness"/>
    <constant name="EMBarrel_rmax" value="BarCryoECal_rmax-CommonCryoThickness-LArBathThickness"/>
    <constant name="EMBarrel_dz" value="BarECal_dz-CommonCryoThickness"/>
    <!-- thickness of active volume between two lead plates, measuring perpendicular to the readout plate -->
    <constant name="LAr_thickness" value="5*mm"/>
    <constant name="Pb_thickness" value="2*mm"/>
    <constant name="readout_thickness" value="1*mm"/>
  </define>

  <display>
    <vis name="ecal_envelope" r="0.1" g="0.2" b="0.6" alpha="1" showDaughers="false" visible="true" />
  </display>

  <readouts>
    <readout name="ECalHitsPhiEta">
      <segmentation type="GridPhiEta" grid_size_eta="0.01" phi_bins="629"/>
      <id>system:4,cell:22,eta:-9,phi:-10</id>
    </readout>
  </readouts>

  <detectors>
    <detector id="BarECal_id" name="ECalBarrel" type="EmCaloBarrelInclined" readout="ECalHitsPhiEta">
      <sensitive type="SimpleCalorimeterSD"/>
      <dimensions rmin="BarCryoECal_rmin" rmax="BarCryoECal_rmax" dz="BarCryoECal_dz" vis="ecal_envelope"/>
      <cryostat name="ECAL_Cryo">
        <material name="Aluminum"/>
	     <dimensions rmin="BarCryoECal_rmin" rmax="BarCryoECal_rmax" dz="BarCryoECal_dz" thickness="CryoThickness"/>
      </cryostat>
      <calorimeter name="EM_barrel">
	     <dimensions rmin="EMBarrel_rmin" rmax="EMBarrel_rmax" dz="EMBarrel_dz"/>
	     <active thickness="LAr_thickness">
          <material name="LAr"/>
        </active>
	     <passive thickness="Pb_thickness">
          <material name="Lead"/>
          <rotation angle="30*degree"/>
        </passive>
        <readout thickness="readout_thickness">
          <material name="PCB"/>
        </readout>
        <cell>
	       <dimensions height="1*cm"/>
        </cell>
      </calorimeter>
    </detector>
  </detectors>

</lccdd>
